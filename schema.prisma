// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource postgresql {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "postgresql"
}

generator client {
  provider = "prisma-client-js"
}

model MapLayer {
  id                           String       @id @default(uuid()) @postgresql.Uuid
  name                         String       @default("")
  description                  Json?
  featurePropertySchema        Json?
  parentMapLayer               MapLayer?    @relation("MapLayer_parentMapLayer", fields: [parentMapLayerId], references: [id])
  parentMapLayerId             String?      @map("parentMapLayer") @postgresql.Uuid
  features                     MapFeature[] @relation("MapFeature_mapLayer")
  from_MapLayer_parentMapLayer MapLayer[]   @relation("MapLayer_parentMapLayer")

  @@index([parentMapLayerId])
}

model MapFeature {
  id                String                                   @id @default(uuid()) @postgresql.Uuid
  mapLayer          MapLayer?                                @relation("MapFeature_mapLayer", fields: [mapLayerId], references: [id])
  mapLayerId        String?                                  @map("mapLayer") @postgresql.Uuid
  name              String                                   @default("")
  geometry_geometry Unsupported("GEOMETRY(Geometry, 4326)")?
  geometry_geoJson  Json?
  properties_raw    MapFeatureProperty[]                     @relation("MapFeatureProperty_mapFeature")
  properties        Json?

  @@index([mapLayerId])
  @@index([geometry_geometry])
}

model MapFeatureProperty {
  id           String      @id @default(uuid()) @postgresql.Uuid
  mapFeature   MapFeature? @relation("MapFeatureProperty_mapFeature", fields: [mapFeatureId], references: [id])
  mapFeatureId String?     @map("mapFeature") @postgresql.Uuid
  key          String      @default("")
  type         String?
  value_text   String      @default("")
  value_number Float?

  @@index([mapFeatureId])
}
